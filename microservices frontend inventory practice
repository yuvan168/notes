import React from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import '../styles/Navbar.css';

const Navbar: React.FC = () => {
  const { isAuthenticated, user, logout } = useAuth();
  const navigate = useNavigate();

  const handleLogout = () => {
    logout();
    navigate('/login');
  };

  if (!isAuthenticated) {
    return null;
  }

  return (
    <nav className="navbar">
      <div className="navbar-container">
        <Link to="/dashboard" className="navbar-logo">
          Inventory System
        </Link>
        <ul className="navbar-menu">
          <li>
            <Link to="/dashboard">Dashboard</Link>
          </li>
          <li>
            <Link to="/users">Users</Link>
          </li>
          <li>
            <Link to="/products">Products</Link>
          </li>
          <li>
            <Link to="/sales">Sales</Link>
          </li>
          <li>
            <Link to="/sales-trends">Trends</Link>
          </li>
        </ul>
        <div className="navbar-user">
          <span className="user-name">Welcome, {user?.firstName}</span>
          <button onClick={handleLogout} className="btn btn-logout">
            Logout
          </button>
        </div>
      </div>
    </nav>
  );
};

export default Navbar;



import React from 'react';
import { Navigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';

interface ProtectedRouteProps {
  children: React.ReactElement;
}

const ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children }) => {
  const { isAuthenticated } = useAuth();

  if (!isAuthenticated) {
    return <Navigate to="/login" replace />;
  }

  return children;
};

export default ProtectedRoute;


import * as React from 'react';
import { createContext, useState, useContext, useEffect, ReactNode } from 'react';
import { AuthContextType, LoginResponse } from '../types';
import { userService } from '../services/userService';

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const AuthProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(false);
  const [user, setUser] = useState<LoginResponse | null>(null);
  const [token, setToken] = useState<string | null>(null);

  useEffect(() => {
    const storedToken = localStorage.getItem('token');
    const storedUser = localStorage.getItem('user');
    
    if (storedToken && storedUser) {
      setToken(storedToken);
      setUser(JSON.parse(storedUser));
      setIsAuthenticated(true);
    }
  }, []);

  const login = async (email: string, password: string) => {
    try {
      console.log('AuthContext: Calling userService.login...');
      const response = await userService.login({ email, password });
      console.log('AuthContext: Login response:', response);
      
      if (response.success && response.token) {
        console.log('AuthContext: Login successful, storing token and user');
        localStorage.setItem('token', response.token);
        localStorage.setItem('user', JSON.stringify(response));
        setToken(response.token);
        setUser(response);
        setIsAuthenticated(true);
      } else {
        console.error('AuthContext: Login failed - no token or success=false');
        throw new Error(response.message || 'Invalid email or password');
      }
    } catch (error: any) {
      console.error('AuthContext: Login error caught:', error);
      if (error.code === 'ERR_NETWORK') {
        throw new Error('Cannot connect to server. Please make sure backend services are running.');
      } else if (error.response?.status === 401 || error.response?.status === 403) {
        throw new Error('Invalid email or password');
      } else if (error.response?.data?.message) {
        throw new Error(error.response.data.message);
      }
      throw error;
    }
  };

  const logout = () => {
    localStorage.removeItem('token');
    localStorage.removeItem('user');
    setToken(null);
    setUser(null);
    setIsAuthenticated(false);
  };

  return (
    <AuthContext.Provider value={{ isAuthenticated, user, login, logout, token }}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = (): AuthContextType => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};


import { useState } from 'react';
import axios from 'axios';

const ConnectionTest: React.FC = () => {
  const [status, setStatus] = useState<string>('Not tested');
  const [details, setDetails] = useState<string>('');

  const testConnection = async () => {
    setStatus('Testing...');
    setDetails('');

    try {
      // Test API Gateway
      const response = await axios.post(
        'http://localhost:8086/user-service/users/login',
        { email: 'test@test.com', password: 'test123' },
        { 
          headers: { 'Content-Type': 'application/json' },
          timeout: 5000 
        }
      );
      
      setStatus('‚úÖ Connected to backend!');
      setDetails(JSON.stringify(response.data, null, 2));
    } catch (error: any) {
      if (error.code === 'ERR_NETWORK') {
        setStatus('‚ùå Network Error');
        setDetails('Cannot connect to http://localhost:8086\n\nPossible issues:\n1. API Gateway is not running\n2. API Gateway is running on a different port\n3. CORS is blocking the request');
      } else if (error.response) {
        setStatus('‚úÖ Connected! (Got response)');
        setDetails(`Status: ${error.response.status}\nData: ${JSON.stringify(error.response.data, null, 2)}`);
      } else {
        setStatus('‚ùå Error');
        setDetails(error.message);
      }
    }
  };

  return (
    <div style={{ padding: '20px', maxWidth: '800px', margin: '0 auto' }}>
      <h2>Backend Connection Test</h2>
      <button onClick={testConnection} style={{ padding: '10px 20px', cursor: 'pointer' }}>
        Test Connection
      </button>
      <div style={{ marginTop: '20px' }}>
        <h3>Status: {status}</h3>
        {details && (
          <pre style={{ 
            background: '#f5f5f5', 
            padding: '15px', 
            borderRadius: '5px',
            overflow: 'auto',
            whiteSpace: 'pre-wrap'
          }}>
            {details}
          </pre>
        )}
      </div>
      <div style={{ marginTop: '30px', background: '#fff3cd', padding: '15px', borderRadius: '5px' }}>
        <h3>Checklist:</h3>
        <ul style={{ textAlign: 'left' }}>
          <li>‚úì Eureka Server running on port 8761</li>
          <li>‚úì Config Server running on port 8888</li>
          <li>‚úì API Gateway running on port 8086</li>
          <li>‚úì User Service running on port 8081</li>
          <li>‚úì Product Service running on port 8082</li>
          <li>‚úì MySQL database running</li>
        </ul>
      </div>
    </div>
  );
};

export default ConnectionTest;


import React, { useEffect, useState } from 'react';
import { Link } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import '../styles/Dashboard.css';

const Dashboard: React.FC = () => {
  const { user } = useAuth();

  return (
    <div className="dashboard-container">
      <div className="welcome-section">
        <h1>Welcome, {user?.firstName}!</h1>
        <p>Manage your inventory and products from here</p>
      </div>

      <div className="dashboard-grid">
        <Link to="/users" className="dashboard-card">
          <div className="card-icon">üë•</div>
          <h3>Users</h3>
          <p>Manage user accounts</p>
        </Link>

        <Link to="/products" className="dashboard-card">
          <div className="card-icon">üì¶</div>
          <h3>Products</h3>
          <p>View and manage products</p>
        </Link>

        <Link to="/sales" className="dashboard-card">
          <div className="card-icon">üí∞</div>
          <h3>Sales</h3>
          <p>Record and manage sales</p>
        </Link>

        <Link to="/sales-trends" className="dashboard-card">
          <div className="card-icon">üìä</div>
          <h3>Sales Trends</h3>
          <p>View analytics and insights</p>
        </Link>
      </div>
    </div>
  );
};

export default Dashboard;


import { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import '../styles/Auth.css';

const Login: React.FC = () => {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);
  const { login } = useAuth();
  const navigate = useNavigate();

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');
    setLoading(true);

    console.log('Attempting login with:', { email, password: '***' });

    try {
      await login(email, password);
      console.log('Login successful!');
      navigate('/dashboard');
    } catch (err: any) {
      console.error('Login error:', err);
      console.error('Error details:', {
        message: err.message,
        response: err.response?.data,
        status: err.response?.status
      });
      setError(err.message || 'Login failed. Please check your credentials.');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="auth-container">
      <div className="auth-card">
        <h2>Login</h2>
        <form onSubmit={handleSubmit}>
          <div className="form-group">
            <label htmlFor="email">Email</label>
            <input
              type="email"
              id="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              required
              placeholder="Enter your email"
            />
          </div>
          <div className="form-group">
            <label htmlFor="password">Password</label>
            <input
              type="password"
              id="password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              required
              placeholder="Enter your password"
            />
          </div>
          {error && <div className="error-message">{error}</div>}
          <button type="submit" className="btn btn-primary" disabled={loading}>
            {loading ? 'Logging in...' : 'Login'}
          </button>
        </form>
        <p className="auth-link">
          Don't have an account? <Link to="/register">Register here</Link>
        </p>
      </div>
    </div>
  );
};

export default Login;


import { useEffect, useState } from 'react';
import { productService } from '../services/productService';
import { Product } from '../types';
import '../styles/Table.css';

const Products: React.FC = () => {
  const [products, setProducts] = useState<Product[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState('');
  const [editingProduct, setEditingProduct] = useState<Product | null>(null);
  const [addingProduct, setAddingProduct] = useState(false);
  const [newProduct, setNewProduct] = useState<Product>({
    name: '',
    description: '',
    manufacturer: '',
    price: 0,
    quantity: 0,
  });

  useEffect(() => {
    fetchProducts();
  }, []);

  const fetchProducts = async () => {
    try {
      setLoading(true);
      setError('');
      console.log('Fetching products...');
      const data = await productService.getAllProducts();
      console.log('Products fetched successfully:', data);
      setProducts(data);
    } catch (err: any) {
      console.error('Error fetching products:', err);
      if (err.code === 'ERR_NETWORK') {
        setError('Cannot connect to server. Please check if backend services are running.');
      } else if (err.response?.status === 401) {
        setError('Unauthorized. Please login again.');
      } else if (err.response?.status === 403) {
        setError('Access forbidden. Check your permissions.');
      } else if (err.response?.data?.message) {
        setError(err.response.data.message);
      } else if (err.message) {
        setError(err.message);
      } else {
        setError('Failed to fetch products. Please try again.');
      }
    } finally {
      setLoading(false);
    }
  };

  const handleDelete = async (id: number) => {
    if (window.confirm('Are you sure you want to delete this product?')) {
      try {
        await productService.deleteProduct(id);
        setProducts(products.filter(product => product.id !== id));
        alert('Product deleted successfully');
      } catch (err: any) {
        alert(err.response?.data?.message || 'Failed to delete product');
      }
    }
  };

  const handleEdit = (product: Product) => {
    setEditingProduct({ ...product });
  };

  const handleUpdate = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!editingProduct || !editingProduct.id) return;

    try {
      await productService.updateProduct(editingProduct.id, editingProduct);
      setProducts(products.map(p => p.id === editingProduct.id ? editingProduct : p));
      setEditingProduct(null);
      alert('Product updated successfully');
    } catch (err: any) {
      alert(err.response?.data?.message || 'Failed to update product');
    }
  };

  const handleAdd = async (e: React.FormEvent) => {
    e.preventDefault();
    try {
      const added = await productService.addProduct(newProduct);
      setProducts([...products, added]);
      setAddingProduct(false);
      setNewProduct({
        name: '',
        description: '',
        manufacturer: '',
        price: 0,
        quantity: 0,
      });
      alert('Product added successfully');
    } catch (err: any) {
      alert(err.response?.data?.message || 'Failed to add product');
    }
  };

  const handleEditChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {
    if (!editingProduct) return;
    const value = e.target.type === 'number' ? parseFloat(e.target.value) : e.target.value;
    setEditingProduct({
      ...editingProduct,
      [e.target.name]: value,
    });
  };

  const handleNewChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {
    const value = e.target.type === 'number' ? parseFloat(e.target.value) : e.target.value;
    setNewProduct({
      ...newProduct,
      [e.target.name]: value,
    });
  };

  if (loading) return <div className="loading">Loading products...</div>;
  if (error) return (
    <div className="page-container">
      <div className="error-message">
        <p>{error}</p>
        <button className="btn btn-primary" onClick={fetchProducts} style={{ marginTop: '10px' }}>
          Retry
        </button>
      </div>
    </div>
  );

  return (
    <div className="page-container">
      <div className="page-header">
        <h1>Product Management</h1>
        <button className="btn btn-primary" onClick={() => setAddingProduct(true)}>
          Add Product
        </button>
      </div>

      {addingProduct && (
        <div className="modal-overlay" onClick={() => setAddingProduct(false)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <h2>Add New Product</h2>
            <form onSubmit={handleAdd}>
              <div className="form-group">
                <label>Product Name</label>
                <input
                  type="text"
                  name="name"
                  value={newProduct.name}
                  onChange={handleNewChange}
                  required
                />
              </div>
              <div className="form-group">
                <label>Description</label>
                <textarea
                  name="description"
                  value={newProduct.description}
                  onChange={handleNewChange}
                  required
                  rows={3}
                />
              </div>
              <div className="form-group">
                <label>Manufacturer</label>
                <input
                  type="text"
                  name="manufacturer"
                  value={newProduct.manufacturer}
                  onChange={handleNewChange}
                  required
                />
              </div>
              <div className="form-group">
                <label>Price</label>
                <input
                  type="number"
                  name="price"
                  step="0.01"
                  value={newProduct.price}
                  onChange={handleNewChange}
                  required
                />
              </div>
              <div className="form-group">
                <label>Quantity</label>
                <input
                  type="number"
                  name="quantity"
                  value={newProduct.quantity}
                  onChange={handleNewChange}
                  required
                />
              </div>
              <div className="modal-actions">
                <button type="submit" className="btn btn-primary">Add Product</button>
                <button type="button" className="btn btn-secondary" onClick={() => setAddingProduct(false)}>
                  Cancel
                </button>
              </div>
            </form>
          </div>
        </div>
      )}

      {editingProduct && (
        <div className="modal-overlay" onClick={() => setEditingProduct(null)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <h2>Edit Product</h2>
            <form onSubmit={handleUpdate}>
              <div className="form-group">
                <label>Product Name</label>
                <input
                  type="text"
                  name="name"
                  value={editingProduct.name}
                  onChange={handleEditChange}
                  required
                />
              </div>
              <div className="form-group">
                <label>Description</label>
                <textarea
                  name="description"
                  value={editingProduct.description}
                  onChange={handleEditChange}
                  required
                  rows={3}
                />
              </div>
              <div className="form-group">
                <label>Manufacturer</label>
                <input
                  type="text"
                  name="manufacturer"
                  value={editingProduct.manufacturer}
                  onChange={handleEditChange}
                  required
                />
              </div>
              <div className="form-group">
                <label>Price</label>
                <input
                  type="number"
                  name="price"
                  step="0.01"
                  value={editingProduct.price}
                  onChange={handleEditChange}
                  required
                />
              </div>
              <div className="form-group">
                <label>Quantity</label>
                <input
                  type="number"
                  name="quantity"
                  value={editingProduct.quantity}
                  onChange={handleEditChange}
                  required
                />
              </div>
              <div className="modal-actions">
                <button type="submit" className="btn btn-primary">Update</button>
                <button type="button" className="btn btn-secondary" onClick={() => setEditingProduct(null)}>
                  Cancel
                </button>
              </div>
            </form>
          </div>
        </div>
      )}

      <div className="table-container">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Description</th>
              <th>Manufacturer</th>
              <th>Price</th>
              <th>Quantity</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {products.map(product => (
              <tr key={product.id}>
                <td>{product.id}</td>
                <td>{product.name}</td>
                <td>{product.description}</td>
                <td>{product.manufacturer}</td>
                <td>${product.price.toFixed(2)}</td>
                <td>{product.quantity}</td>
                <td>
                  <button className="btn btn-small btn-edit" onClick={() => handleEdit(product)}>
                    Edit
                  </button>
                  <button className="btn btn-small btn-delete" onClick={() => handleDelete(product.id!)}>
                    Delete
                  </button>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
};

export default Products;


import { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { userService } from '../services/userService';
import { User } from '../types';
import '../styles/Auth.css';

const Register: React.FC = () => {
  const [formData, setFormData] = useState<User>({
    email: '',
    password: '',
    firstName: '',
    lastName: '',
    location: '',
    mobileNumber: '',
  });
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);
  const navigate = useNavigate();

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value,
    });
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');
    setLoading(true);

    try {
      await userService.register(formData);
      alert('Registration successful! Please login.');
      navigate('/login');
    } catch (err: any) {
      if (err.code === 'ERR_NETWORK') {
        setError('Cannot connect to server. Please make sure backend services are running on port 8086.');
      } else if (err.response?.data?.message) {
        setError(err.response.data.message);
      } else if (err.message) {
        setError(err.message);
      } else {
        setError('Registration failed. Please try again.');
      }
      console.error('Registration error:', err);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="auth-container">
      <div className="auth-card">
        <h2>Register</h2>
        <form onSubmit={handleSubmit}>
          <div className="form-row">
            <div className="form-group">
              <label htmlFor="firstName">First Name</label>
              <input
                type="text"
                id="firstName"
                name="firstName"
                value={formData.firstName}
                onChange={handleChange}
                required
                placeholder="First Name"
              />
            </div>
            <div className="form-group">
              <label htmlFor="lastName">Last Name</label>
              <input
                type="text"
                id="lastName"
                name="lastName"
                value={formData.lastName}
                onChange={handleChange}
                required
                placeholder="Last Name"
              />
            </div>
          </div>
          <div className="form-group">
            <label htmlFor="email">Email</label>
            <input
              type="email"
              id="email"
              name="email"
              value={formData.email}
              onChange={handleChange}
              required
              placeholder="Email Address"
            />
          </div>
          <div className="form-group">
            <label htmlFor="password">Password</label>
            <input
              type="password"
              id="password"
              name="password"
              value={formData.password}
              onChange={handleChange}
              required
              placeholder="Password"
            />
          </div>
          <div className="form-group">
            <label htmlFor="mobileNumber">Mobile Number</label>
            <input
              type="tel"
              id="mobileNumber"
              name="mobileNumber"
              value={formData.mobileNumber}
              onChange={handleChange}
              required
              placeholder="Mobile Number"
            />
          </div>
          <div className="form-group">
            <label htmlFor="location">Location</label>
            <input
              type="text"
              id="location"
              name="location"
              value={formData.location}
              onChange={handleChange}
              required
              placeholder="Location"
            />
          </div>
          {error && <div className="error-message">{error}</div>}
          <button type="submit" className="btn btn-primary" disabled={loading}>
            {loading ? 'Registering...' : 'Register'}
          </button>
        </form>
        <p className="auth-link">
          Already have an account? <Link to="/login">Login here</Link>
        </p>
      </div>
    </div>
  );
};

export default Register;


import React, { useState, useEffect } from 'react';
import { salesService } from '../services/salesService';
import { productService } from '../services/productService';
import { Sale, Product } from '../types';
import '../styles/Table.css';

const Sales: React.FC = () => {
  const [sales, setSales] = useState<Sale[]>([]);
  const [products, setProducts] = useState<Product[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [showModal, setShowModal] = useState(false);
  const [newSale, setNewSale] = useState<Partial<Sale>>({
    productId: 0,
    productName: '',
    quantity: 1,
    unitPrice: 0,
    customerName: '',
    customerEmail: ''
  });

  useEffect(() => {
    fetchSales();
    fetchProducts();
  }, []);

  const fetchSales = async () => {
    try {
      setLoading(true);
      setError(null);
      console.log('Fetching sales data...');
      const data = await salesService.getAllSales();
      setSales(data);
      console.log('Sales loaded:', data);
    } catch (err: any) {
      console.error('Error fetching sales:', err);
      setError(err.response?.data?.message || 'Failed to fetch sales data. Please try again.');
    } finally {
      setLoading(false);
    }
  };

  const fetchProducts = async () => {
    try {
      console.log('Fetching products for sale selection...');
      const data = await productService.getAllProducts();
      setProducts(data);
      console.log('Products loaded:', data);
    } catch (err: any) {
      console.error('Error fetching products:', err);
    }
  };

  const handleCreateSale = async (e: React.FormEvent) => {
    e.preventDefault();
    try {
      console.log('Creating sale:', newSale);
      await salesService.createSale(newSale);
      setShowModal(false);
      setNewSale({
        productId: 0,
        productName: '',
        quantity: 1,
        unitPrice: 0,
        customerName: '',
        customerEmail: ''
      });
      fetchSales(); // Refresh the list
    } catch (err: any) {
      console.error('Error creating sale:', err);
      alert(err.response?.data || 'Failed to create sale. Please try again.');
    }
  };

  const handleDeleteSale = async (id: number) => {
    if (window.confirm('Are you sure you want to delete this sale?')) {
      try {
        console.log('Deleting sale:', id);
        await salesService.deleteSale(id);
        fetchSales(); // Refresh the list
      } catch (err: any) {
        console.error('Error deleting sale:', err);
        alert('Failed to delete sale. Please try again.');
      }
    }
  };

  const formatDate = (dateString: string) => {
    return new Date(dateString).toLocaleString();
  };

  const formatCurrency = (amount: number) => {
    return `$${amount.toFixed(2)}`;
  };

  if (loading) {
    return <div className="loading">Loading sales data...</div>;
  }

  return (
    <div className="page-container">
      <div className="page-header">
        <h1>Sales Management</h1>
        <button className="btn btn-primary" onClick={() => setShowModal(true)}>
          + Record New Sale
        </button>
      </div>

      {error && (
        <div className="error-message">
          <p>{error}</p>
          <button onClick={fetchSales} className="btn btn-secondary">
            Retry
          </button>
        </div>
      )}

      <div className="table-container">
        <table className="data-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Product</th>
              <th>Quantity</th>
              <th>Unit Price</th>
              <th>Total Price</th>
              <th>Customer</th>
              <th>Email</th>
              <th>Sale Date</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {sales.length === 0 ? (
              <tr>
                <td colSpan={9} className="no-data">
                  No sales recorded yet. Click "Record New Sale" to add one.
                </td>
              </tr>
            ) : (
              sales.map((sale) => (
                <tr key={sale.id}>
                  <td>{sale.id}</td>
                  <td>{sale.productName}</td>
                  <td>{sale.quantity}</td>
                  <td>{formatCurrency(sale.unitPrice)}</td>
                  <td className="highlight">{formatCurrency(sale.totalPrice)}</td>
                  <td>{sale.customerName || 'N/A'}</td>
                  <td>{sale.customerEmail || 'N/A'}</td>
                  <td>{formatDate(sale.saleDate)}</td>
                  <td>
                    <button
                      onClick={() => handleDeleteSale(sale.id!)}
                      className="btn btn-danger btn-sm"
                    >
                      Delete
                    </button>
                  </td>
                </tr>
              ))
            )}
          </tbody>
        </table>
      </div>

      {/* Add Sale Modal */}
      {showModal && (
        <div className="modal-overlay" onClick={() => setShowModal(false)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2>Record New Sale</h2>
              <button className="close-btn" onClick={() => setShowModal(false)}>
                &times;
              </button>
            </div>
            <form onSubmit={handleCreateSale}>
              {products.length > 0 ? (
                <div className="form-group">
                  <label>Product *</label>
                  <select
                    value={newSale.productId}
                    onChange={(e) => {
                      const selectedProduct = products.find(p => p.id === parseInt(e.target.value));
                      setNewSale({ 
                        ...newSale, 
                        productId: parseInt(e.target.value),
                        productName: selectedProduct?.name || '',
                        unitPrice: selectedProduct?.price || 0
                      });
                    }}
                    required
                  >
                    <option value={0}>Select a product</option>
                    {products.map((product) => (
                      <option key={product.id} value={product.id}>
                        {product.name} - ${product.price} (Stock: {product.quantity})
                      </option>
                    ))}
                  </select>
                </div>
              ) : (
                <>
                  <div className="form-group">
                    <label>Product Name *</label>
                    <input
                      type="text"
                      value={newSale.productName}
                      onChange={(e) => setNewSale({ ...newSale, productName: e.target.value })}
                      placeholder="Enter product name"
                      required
                    />
                  </div>
                  <div className="form-group">
                    <label>Unit Price *</label>
                    <input
                      type="number"
                      step="0.01"
                      min="0.01"
                      value={newSale.unitPrice}
                      onChange={(e) => setNewSale({ ...newSale, unitPrice: parseFloat(e.target.value) })}
                      placeholder="0.00"
                      required
                    />
                  </div>
                </>
              )}
              <div className="form-group">
                <label>Quantity *</label>
                <input
                  type="number"
                  min="1"
                  value={newSale.quantity}
                  onChange={(e) => setNewSale({ ...newSale, quantity: parseInt(e.target.value) })}
                  required
                />
              </div>
              <div className="form-group">
                <label>Customer Name</label>
                <input
                  type="text"
                  value={newSale.customerName}
                  onChange={(e) => setNewSale({ ...newSale, customerName: e.target.value })}
                  placeholder="Optional"
                />
              </div>
              <div className="form-group">
                <label>Customer Email</label>
                <input
                  type="email"
                  value={newSale.customerEmail}
                  onChange={(e) => setNewSale({ ...newSale, customerEmail: e.target.value })}
                  placeholder="Optional"
                />
              </div>
              <div className="modal-actions">
                <button type="button" onClick={() => setShowModal(false)} className="btn btn-secondary">
                  Cancel
                </button>
                <button type="submit" className="btn btn-primary">
                  Record Sale
                </button>
              </div>
            </form>
          </div>
        </div>
      )}
    </div>
  );
};

export default Sales;



import React, { useState, useEffect } from 'react';
import { salesService } from '../services/salesService';
import { SalesTrend } from '../types';
import '../styles/Sales.css';

const SalesTrends: React.FC = () => {
  const [trends, setTrends] = useState<SalesTrend | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [dateRange, setDateRange] = useState({
    startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
    endDate: new Date().toISOString().split('T')[0]
  });

  useEffect(() => {
    fetchTrends();
  }, []);

  const fetchTrends = async () => {
    try {
      setLoading(true);
      setError(null);
      console.log('Fetching sales trends...');
      
      const startDateTime = `${dateRange.startDate}T00:00:00`;
      const endDateTime = `${dateRange.endDate}T23:59:59`;
      
      const data = await salesService.getSalesTrends(startDateTime, endDateTime);
      setTrends(data);
      console.log('Trends loaded:', data);
    } catch (err: any) {
      console.error('Error fetching trends:', err);
      setError(err.response?.data?.message || 'Failed to fetch sales trends. Please try again.');
    } finally {
      setLoading(false);
    }
  };

  const handleDateChange = (e: React.FormEvent) => {
    e.preventDefault();
    fetchTrends();
  };

  const formatCurrency = (amount: number) => {
    return `$${amount.toFixed(2)}`;
  };

  const formatDate = (dateString: string) => {
    return new Date(dateString).toLocaleDateString();
  };

  if (loading) {
    return <div className="loading">Loading sales trends...</div>;
  }

  return (
    <div className="page-container">
      <div className="page-header">
        <h1>Sales Trends & Analytics</h1>
      </div>

      {/* Date Range Filter */}
      <div className="filter-section">
        <form onSubmit={handleDateChange} className="date-filter-form">
          <div className="form-group">
            <label>Start Date</label>
            <input
              type="date"
              value={dateRange.startDate}
              onChange={(e) => setDateRange({ ...dateRange, startDate: e.target.value })}
            />
          </div>
          <div className="form-group">
            <label>End Date</label>
            <input
              type="date"
              value={dateRange.endDate}
              onChange={(e) => setDateRange({ ...dateRange, endDate: e.target.value })}
            />
          </div>
          <button type="submit" className="btn btn-primary">
            Apply Filter
          </button>
        </form>
      </div>

      {error && (
        <div className="error-message">
          <p>{error}</p>
          <button onClick={fetchTrends} className="btn btn-secondary">
            Retry
          </button>
        </div>
      )}

      {trends && (
        <>
          {/* Summary Cards */}
          <div className="stats-grid">
            <div className="stat-card">
              <div className="stat-icon">üí∞</div>
              <div className="stat-info">
                <h3>Total Revenue</h3>
                <p className="stat-value">{formatCurrency(trends.totalRevenue)}</p>
              </div>
            </div>
            <div className="stat-card">
              <div className="stat-icon">üõí</div>
              <div className="stat-info">
                <h3>Total Sales</h3>
                <p className="stat-value">{trends.totalSales}</p>
              </div>
            </div>
            <div className="stat-card">
              <div className="stat-icon">üìä</div>
              <div className="stat-info">
                <h3>Average Sale</h3>
                <p className="stat-value">
                  {trends.totalSales > 0
                    ? formatCurrency(trends.totalRevenue / trends.totalSales)
                    : '$0.00'}
                </p>
              </div>
            </div>
            <div className="stat-card">
              <div className="stat-icon">üìÖ</div>
              <div className="stat-info">
                <h3>Date Range</h3>
                <p className="stat-value-small">
                  {formatDate(trends.startDate)} - {formatDate(trends.endDate)}
                </p>
              </div>
            </div>
          </div>

          {/* Daily Revenue Chart */}
          <div className="chart-section">
            <h2>Daily Revenue</h2>
            <div className="bar-chart">
              {Object.entries(trends.dailyRevenue).length === 0 ? (
                <p className="no-data">No sales data available for this period.</p>
              ) : (
                Object.entries(trends.dailyRevenue).map(([date, revenue]) => {
                  const maxRevenue = Math.max(...Object.values(trends.dailyRevenue));
                  const heightPercentage = maxRevenue > 0 ? (revenue / maxRevenue) * 100 : 0;
                  return (
                    <div key={date} className="bar-item">
                      <div className="bar-label">{formatCurrency(revenue)}</div>
                      <div
                        className="bar"
                        style={{ height: `${Math.max(heightPercentage, 5)}%` }}
                        title={`${date}: ${formatCurrency(revenue)}`}
                      ></div>
                      <div className="bar-date">{new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</div>
                    </div>
                  );
                })
              )}
            </div>
          </div>

          {/* Daily Sales Count Chart */}
          <div className="chart-section">
            <h2>Daily Sales Count</h2>
            <div className="bar-chart">
              {Object.entries(trends.dailyCount).length === 0 ? (
                <p className="no-data">No sales data available for this period.</p>
              ) : (
                Object.entries(trends.dailyCount).map(([date, count]) => {
                  const maxCount = Math.max(...Object.values(trends.dailyCount));
                  const heightPercentage = maxCount > 0 ? (count / maxCount) * 100 : 0;
                  return (
                    <div key={date} className="bar-item">
                      <div className="bar-label">{count}</div>
                      <div
                        className="bar bar-secondary"
                        style={{ height: `${Math.max(heightPercentage, 5)}%` }}
                        title={`${date}: ${count} sales`}
                      ></div>
                      <div className="bar-date">{new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</div>
                    </div>
                  );
                })
              )}
            </div>
          </div>

          {/* Top Products Table */}
          <div className="table-section">
            <h2>Top Products by Revenue</h2>
            <div className="table-container">
              <table className="data-table">
                <thead>
                  <tr>
                    <th>Rank</th>
                    <th>Product</th>
                    <th>Total Quantity Sold</th>
                    <th>Total Revenue</th>
                  </tr>
                </thead>
                <tbody>
                  {trends.topProducts.length === 0 ? (
                    <tr>
                      <td colSpan={4} className="no-data">
                        No product sales data available.
                      </td>
                    </tr>
                  ) : (
                    trends.topProducts.map((product, index) => (
                      <tr key={product.productId}>
                        <td>
                          <span className={`rank-badge rank-${index + 1}`}>#{index + 1}</span>
                        </td>
                        <td>{product.productName}</td>
                        <td>{product.totalQuantity}</td>
                        <td className="highlight">{formatCurrency(product.totalRevenue)}</td>
                      </tr>
                    ))
                  )}
                </tbody>
              </table>
            </div>
          </div>
        </>
      )}
    </div>
  );
};

export default SalesTrends;


import { useEffect, useState } from 'react';
import { userService } from '../services/userService';
import { User } from '../types';
import '../styles/Table.css';

const Users: React.FC = () => {
  const [users, setUsers] = useState<User[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState('');
  const [editingUser, setEditingUser] = useState<User | null>(null);
  const [addingUser, setAddingUser] = useState(false);
  const [newUser, setNewUser] = useState<User>({
    email: '',
    password: '',
    firstName: '',
    lastName: '',
    location: '',
    mobileNumber: '',
  });

  useEffect(() => {
    fetchUsers();
  }, []);

  const fetchUsers = async () => {
    try {
      setLoading(true);
      setError('');
      console.log('Fetching users...');
      const data = await userService.getAllUsers();
      console.log('Users fetched successfully:', data);
      setUsers(data);
    } catch (err: any) {
      console.error('Error fetching users:', err);
      if (err.code === 'ERR_NETWORK') {
        setError('Cannot connect to server. Please check if backend services are running.');
      } else if (err.response?.status === 401) {
        setError('Unauthorized. Please login again.');
      } else if (err.response?.status === 403) {
        setError('Access forbidden. Check your permissions.');
      } else if (err.response?.data?.message) {
        setError(err.response.data.message);
      } else if (err.message) {
        setError(err.message);
      } else {
        setError('Failed to fetch users. Please try again.');
      }
    } finally {
      setLoading(false);
    }
  };

  const handleDelete = async (id: number) => {
    if (window.confirm('Are you sure you want to delete this user?')) {
      try {
        await userService.deleteUser(id);
        setUsers(users.filter(user => user.id !== id));
        alert('User deleted successfully');
      } catch (err: any) {
        alert(err.response?.data?.message || 'Failed to delete user');
      }
    }
  };

  const handleEdit = (user: User) => {
    setEditingUser({ ...user, password: '' });
  };

  const handleUpdate = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!editingUser || !editingUser.id) return;

    try {
      await userService.updateUser(editingUser.id, editingUser);
      setUsers(users.map(u => u.id === editingUser.id ? editingUser : u));
      setEditingUser(null);
      alert('User updated successfully');
    } catch (err: any) {
      alert(err.response?.data?.message || 'Failed to update user');
    }
  };

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    if (!editingUser) return;
    setEditingUser({
      ...editingUser,
      [e.target.name]: e.target.value,
    });
  };

  const handleNewUserChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setNewUser({
      ...newUser,
      [e.target.name]: e.target.value,
    });
  };

  const handleAdd = async (e: React.FormEvent) => {
    e.preventDefault();
    try {
      const added = await userService.register(newUser);
      setUsers([...users, added]);
      setAddingUser(false);
      setNewUser({
        email: '',
        password: '',
        firstName: '',
        lastName: '',
        location: '',
        mobileNumber: '',
      });
      alert('User added successfully');
      fetchUsers(); // Refresh the list
    } catch (err: any) {
      alert(err.response?.data?.message || 'Failed to add user');
    }
  };

  if (loading) return <div className="loading">Loading users...</div>;
  if (error) return (
    <div className="page-container">
      <div className="error-message">
        <p>{error}</p>
        <button className="btn btn-primary" onClick={fetchUsers} style={{ marginTop: '10px' }}>
          Retry
        </button>
      </div>
    </div>
  );

  return (
    <div className="page-container">
      <div className="page-header">
        <h1>User Management</h1>
        <button className="btn btn-primary" onClick={() => setAddingUser(true)}>
          Add User
        </button>
      </div>

      {addingUser && (
        <div className="modal-overlay" onClick={() => setAddingUser(false)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <h2>Add New User</h2>
            <form onSubmit={handleAdd}>
              <div className="form-row">
                <div className="form-group">
                  <label>First Name</label>
                  <input
                    type="text"
                    name="firstName"
                    value={newUser.firstName}
                    onChange={handleNewUserChange}
                    required
                    placeholder="First Name"
                  />
                </div>
                <div className="form-group">
                  <label>Last Name</label>
                  <input
                    type="text"
                    name="lastName"
                    value={newUser.lastName}
                    onChange={handleNewUserChange}
                    required
                    placeholder="Last Name"
                  />
                </div>
              </div>
              <div className="form-group">
                <label>Email</label>
                <input
                  type="email"
                  name="email"
                  value={newUser.email}
                  onChange={handleNewUserChange}
                  required
                  placeholder="Email Address"
                />
              </div>
              <div className="form-group">
                <label>Password</label>
                <input
                  type="password"
                  name="password"
                  value={newUser.password}
                  onChange={handleNewUserChange}
                  required
                  placeholder="Password"
                />
              </div>
              <div className="form-group">
                <label>Mobile Number</label>
                <input
                  type="tel"
                  name="mobileNumber"
                  value={newUser.mobileNumber}
                  onChange={handleNewUserChange}
                  required
                  placeholder="Mobile Number"
                />
              </div>
              <div className="form-group">
                <label>Location</label>
                <input
                  type="text"
                  name="location"
                  value={newUser.location}
                  onChange={handleNewUserChange}
                  required
                  placeholder="Location"
                />
              </div>
              <div className="modal-actions">
                <button type="submit" className="btn btn-primary">Add User</button>
                <button type="button" className="btn btn-secondary" onClick={() => setAddingUser(false)}>
                  Cancel
                </button>
              </div>
            </form>
          </div>
        </div>
      )}
      
      {editingUser && (
        <div className="modal-overlay" onClick={() => setEditingUser(null)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <h2>Edit User</h2>
            <form onSubmit={handleUpdate}>
              <div className="form-group">
                <label>First Name</label>
                <input
                  type="text"
                  name="firstName"
                  value={editingUser.firstName}
                  onChange={handleChange}
                  required
                />
              </div>
              <div className="form-group">
                <label>Last Name</label>
                <input
                  type="text"
                  name="lastName"
                  value={editingUser.lastName}
                  onChange={handleChange}
                  required
                />
              </div>
              <div className="form-group">
                <label>Email</label>
                <input
                  type="email"
                  name="email"
                  value={editingUser.email}
                  onChange={handleChange}
                  required
                  disabled
                />
              </div>
              <div className="form-group">
                <label>Mobile Number</label>
                <input
                  type="tel"
                  name="mobileNumber"
                  value={editingUser.mobileNumber}
                  onChange={handleChange}
                  required
                />
              </div>
              <div className="form-group">
                <label>Location</label>
                <input
                  type="text"
                  name="location"
                  value={editingUser.location}
                  onChange={handleChange}
                  required
                />
              </div>
              <div className="form-actions">
                <button type="submit" className="btn btn-primary">Update</button>
                <button type="button" className="btn btn-secondary" onClick={() => setEditingUser(null)}>
                  Cancel
                </button>
              </div>
            </form>
          </div>
        </div>
      )}

      <div className="table-container">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Email</th>
              <th>Mobile</th>
              <th>Location</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {users.map(user => (
              <tr key={user.id}>
                <td>{user.id}</td>
                <td>{user.firstName} {user.lastName}</td>
                <td>{user.email}</td>
                <td>{user.mobileNumber}</td>
                <td>{user.location}</td>
                <td>
                  <button className="btn btn-small btn-edit" onClick={() => handleEdit(user)}>
                    Edit
                  </button>
                  <button className="btn btn-small btn-delete" onClick={() => handleDelete(user.id!)}>
                    Delete
                  </button>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
};

export default Users;



import axios, { AxiosInstance, InternalAxiosRequestConfig } from 'axios';

// Use empty baseURL to make requests to same origin (uses Vite proxy in dev)
const API_BASE_URL = import.meta.env.PROD ? 'http://localhost:8086' : '';

const apiClient: AxiosInstance = axios.create({
  baseURL: API_BASE_URL,
  headers: {
    'Content-Type': 'application/json',
  },
  timeout: 10000, // 10 second timeout
});

// Request interceptor to add JWT token
apiClient.interceptors.request.use(
  (config: InternalAxiosRequestConfig) => {
    // Don't add token for login and register endpoints
    const isAuthEndpoint = config.url?.includes('/login') || config.url?.includes('/register');
    
    console.log('API Request:', { 
      url: config.url, 
      method: config.method,
      baseURL: config.baseURL,
      isAuthEndpoint 
    });
    
    if (!isAuthEndpoint) {
      const token = localStorage.getItem('token');
      console.log('Token from localStorage:', token ? 'Token exists' : 'No token found');
      if (token && config.headers) {
        config.headers.Authorization = `Bearer ${token}`;
        console.log('Authorization header added');
      }
    }
    return config;
  },
  (error) => {
    console.error('Request interceptor error:', error);
    return Promise.reject(error);
  }
);

// Response interceptor to handle errors
apiClient.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      localStorage.removeItem('token');
      localStorage.removeItem('user');
      window.location.href = '/login';
    }
    
    // Enhanced error messages
    if (error.code === 'ERR_NETWORK') {
      console.error('Network Error: Cannot connect to backend. Make sure API Gateway is running on port 8086');
    }
    
    return Promise.reject(error);
  }
);

export default apiClient;


import apiClient from './api';
import { Product } from '../types';

const PRODUCT_SERVICE_URL = '/product-service/products';

export const productService = {
  getAllProducts: async (): Promise<Product[]> => {
    const response = await apiClient.get<Product[]>(`${PRODUCT_SERVICE_URL}/all`);
    return response.data;
  },

  getProductById: async (id: number): Promise<Product> => {
    const response = await apiClient.get<Product>(`${PRODUCT_SERVICE_URL}/${id}`);
    return response.data;
  },

  addProduct: async (product: Product): Promise<Product> => {
    const response = await apiClient.post<Product>(PRODUCT_SERVICE_URL, product);
    return response.data;
  },

  updateProduct: async (id: number, product: Product): Promise<Product> => {
    const response = await apiClient.put<Product>(`${PRODUCT_SERVICE_URL}/${id}`, product);
    return response.data;
  },

  deleteProduct: async (id: number): Promise<void> => {
    await apiClient.delete(`${PRODUCT_SERVICE_URL}/${id}`);
  },
};



import api from './api';
import { Sale, SalesTrend } from '../types';

export const salesService = {
  // Get all sales
  getAllSales: async (): Promise<Sale[]> => {
    console.log('Fetching all sales...');
    const response = await api.get('/sales-service/sales/all');
    console.log('Sales fetched successfully:', response.data);
    return response.data;
  },

  // Get sale by ID
  getSaleById: async (id: number): Promise<Sale> => {
    console.log(`Fetching sale with ID ${id}...`);
    const response = await api.get(`/sales-service/sales/${id}`);
    console.log('Sale fetched:', response.data);
    return response.data;
  },

  // Create a new sale
  createSale: async (sale: Partial<Sale>): Promise<Sale> => {
    console.log('Creating new sale:', sale);
    const response = await api.post('/sales-service/sales', sale);
    console.log('Sale created successfully:', response.data);
    return response.data;
  },

  // Get sales by product ID
  getSalesByProduct: async (productId: number): Promise<Sale[]> => {
    console.log(`Fetching sales for product ${productId}...`);
    const response = await api.get(`/sales-service/sales/product/${productId}`);
    console.log('Product sales fetched:', response.data);
    return response.data;
  },

  // Get sales by date range
  getSalesByDateRange: async (startDate: string, endDate: string): Promise<Sale[]> => {
    console.log(`Fetching sales from ${startDate} to ${endDate}...`);
    const response = await api.get('/sales-service/sales/date-range', {
      params: { startDate, endDate }
    });
    console.log('Sales by date range fetched:', response.data);
    return response.data;
  },

  // Get sales trends
  getSalesTrends: async (startDate?: string, endDate?: string): Promise<SalesTrend> => {
    console.log('Fetching sales trends...');
    const params: any = {};
    if (startDate) params.startDate = startDate;
    if (endDate) params.endDate = endDate;
    
    const response = await api.get('/sales-service/sales/trends', { params });
    console.log('Sales trends fetched:', response.data);
    return response.data;
  },

  // Delete a sale
  deleteSale: async (id: number): Promise<void> => {
    console.log(`Deleting sale ${id}...`);
    await api.delete(`/sales-service/sales/${id}`);
    console.log('Sale deleted successfully');
  }
};


import apiClient from './api';
import { User, LoginRequest, LoginResponse } from '../types';

const USER_SERVICE_URL = '/user-service/users';

export const userService = {
  register: async (user: User): Promise<User> => {
    const response = await apiClient.post<User>(`${USER_SERVICE_URL}/register`, user);
    return response.data;
  },

  login: async (credentials: LoginRequest): Promise<LoginResponse> => {
    const response = await apiClient.post<LoginResponse>(`${USER_SERVICE_URL}/login`, credentials);
    return response.data;
  },

  getAllUsers: async (): Promise<User[]> => {
    const response = await apiClient.get<User[]>(`${USER_SERVICE_URL}/all`);
    return response.data;
  },

  getUserById: async (id: number): Promise<User> => {
    const response = await apiClient.get<User>(`${USER_SERVICE_URL}/${id}`);
    return response.data;
  },

  updateUser: async (id: number, user: User): Promise<User> => {
    const response = await apiClient.put<User>(`${USER_SERVICE_URL}/${id}`, user);
    return response.data;
  },

  deleteUser: async (id: number): Promise<void> => {
    await apiClient.delete(`${USER_SERVICE_URL}/${id}`);
  },
};



* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
}

.app {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

.main-content {
  flex: 1;
  padding: 20px;
}

/* Common Buttons */
.btn {
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  transition: all 0.3s ease;
  text-transform: uppercase;
}

.btn-primary {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
}

.btn-primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.btn-secondary {
  background: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background: #5a6268;
}

.btn-small {
  padding: 6px 12px;
  font-size: 12px;
  margin: 0 5px;
}

.btn-edit {
  background: #28a745;
  color: white;
}

.btn-edit:hover {
  background: #218838;
}

.btn-delete {
  background: #dc3545;
  color: white;
}

.btn-delete:hover {
  background: #c82333;
}

/* Loading and Error States */
.loading {
  text-align: center;
  padding: 50px;
  font-size: 20px;
  color: white;
}

.error-message {
  background: #f8d7da;
  color: #721c24;
  padding: 12px 20px;
  border-radius: 5px;
  margin: 15px 0;
  border: 1px solid #f5c6cb;
}

/* Form Styles */
.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  margin-bottom: 8px;
  font-weight: 600;
  color: #333;
}

.form-group input,
.form-group textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: 5px;
  font-size: 14px;
  transition: border-color 0.3s;
}

.form-group input:focus,
.form-group textarea:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

/* Responsive Design */
@media (max-width: 768px) {
  .form-row {
    grid-template-columns: 1fr;
  }
  
  .main-content {
    padding: 10px;
  }
}



.auth-container {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  padding: 20px;
}

.auth-card {
  background: white;
  padding: 40px;
  border-radius: 15px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  width: 100%;
  max-width: 500px;
  animation: slideUp 0.5s ease;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.auth-card h2 {
  text-align: center;
  margin-bottom: 30px;
  color: #333;
  font-size: 28px;
}

.auth-card form {
  display: flex;
  flex-direction: column;
}

.auth-card .btn {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  font-size: 16px;
}

.auth-link {
  text-align: center;
  margin-top: 20px;
  color: #666;
  font-size: 14px;
}

.auth-link a {
  color: #667eea;
  text-decoration: none;
  font-weight: 600;
  transition: color 0.3s;
}

.auth-link a:hover {
  color: #764ba2;
  text-decoration: underline;
}

@media (max-width: 768px) {
  .auth-card {
    padding: 30px 20px;
  }
  
  .auth-card h2 {
    font-size: 24px;
  }
}


dashboard-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 40px 20px;
}

.welcome-section {
  background: white;
  padding: 40px;
  border-radius: 15px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
  margin-bottom: 40px;
  text-align: center;
  animation: fadeIn 0.6s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.welcome-section h1 {
  color: #333;
  font-size: 36px;
  margin-bottom: 10px;
}

.welcome-section p {
  color: #666;
  font-size: 18px;
}

.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;
}

.dashboard-card {
  background: white;
  padding: 40px;
  border-radius: 15px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
  text-decoration: none;
  color: inherit;
  transition: all 0.3s ease;
  text-align: center;
  cursor: pointer;
}

.dashboard-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.card-icon {
  font-size: 60px;
  margin-bottom: 20px;
}

.dashboard-card h3 {
  color: #333;
  font-size: 24px;
  margin-bottom: 10px;
}

.dashboard-card p {
  color: #666;
  font-size: 16px;
}

@media (max-width: 768px) {
  .welcome-section {
    padding: 30px 20px;
  }
  
  .welcome-section h1 {
    font-size: 28px;
  }
  
  .dashboard-grid {
    grid-template-columns: 1fr;
  }
}

.navbar {
  background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  position: sticky;
  top: 0;
  z-index: 1000;
}

.navbar-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 15px 30px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.navbar-logo {
  font-size: 24px;
  font-weight: bold;
  color: white;
  text-decoration: none;
  transition: color 0.3s;
}

.navbar-logo:hover {
  color: #ffd700;
}

.navbar-menu {
  display: flex;
  list-style: none;
  gap: 30px;
}

.navbar-menu li a {
  color: white;
  text-decoration: none;
  font-weight: 500;
  font-size: 16px;
  transition: all 0.3s;
  padding: 8px 15px;
  border-radius: 5px;
}

.navbar-menu li a:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #ffd700;
}

.navbar-user {
  display: flex;
  align-items: center;
  gap: 20px;
}

.user-name {
  color: white;
  font-weight: 500;
  font-size: 14px;
}

.btn-logout {
  background: #dc3545;
  color: white;
  padding: 8px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s;
  font-size: 14px;
}

.btn-logout:hover {
  background: #c82333;
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(220, 53, 69, 0.4);
}

@media (max-width: 768px) {
  .navbar-container {
    flex-direction: column;
    gap: 15px;
    padding: 15px;
  }
  
  .navbar-menu {
    flex-direction: column;
    gap: 10px;
    text-align: center;
    width: 100%;
  }
  
  .navbar-user {
    flex-direction: column;
    gap: 10px;
  }
}

/* Sales and Trends Specific Styles */

/* Filter Section */
.filter-section {
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  margin-bottom: 30px;
}

.date-filter-form {
  display: flex;
  gap: 20px;
  align-items: flex-end;
  flex-wrap: wrap;
}

.date-filter-form .form-group {
  flex: 1;
  min-width: 200px;
}

/* Stats Grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.stat-card {
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  gap: 15px;
  transition: transform 0.2s;
}

.stat-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.stat-icon {
  font-size: 2.5rem;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 12px;
}

.stat-info h3 {
  margin: 0;
  font-size: 0.9rem;
  color: #666;
  font-weight: 500;
}

.stat-value {
  margin: 5px 0 0 0;
  font-size: 1.8rem;
  font-weight: bold;
  color: #333;
}

.stat-value-small {
  margin: 5px 0 0 0;
  font-size: 1rem;
  font-weight: 600;
  color: #667eea;
}

/* Chart Section */
.chart-section {
  background: white;
  padding: 25px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  margin-bottom: 30px;
}

.chart-section h2 {
  margin-top: 0;
  margin-bottom: 20px;
  color: #333;
  font-size: 1.3rem;
}

/* Bar Chart */
.bar-chart {
  display: flex;
  align-items: flex-end;
  justify-content: space-around;
  height: 300px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
  gap: 10px;
  overflow-x: auto;
}

.bar-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1;
  min-width: 60px;
  max-width: 100px;
}

.bar {
  width: 100%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 4px 4px 0 0;
  transition: all 0.3s ease;
  cursor: pointer;
  min-height: 20px;
}

.bar:hover {
  opacity: 0.8;
  transform: scaleY(1.05);
}

.bar-secondary {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

.bar-label {
  font-size: 0.75rem;
  font-weight: 600;
  color: #666;
  margin-bottom: 5px;
  text-align: center;
}

.bar-date {
  font-size: 0.7rem;
  color: #999;
  margin-top: 8px;
  text-align: center;
  writing-mode: horizontal-tb;
}

/* Table Section */
.table-section {
  background: white;
  padding: 25px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  margin-bottom: 30px;
}

.table-section h2 {
  margin-top: 0;
  margin-bottom: 20px;
  color: #333;
  font-size: 1.3rem;
}

/* Rank Badge */
.rank-badge {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 12px;
  font-weight: bold;
  font-size: 0.9rem;
}

.rank-1 {
  background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
  color: white;
}

.rank-2 {
  background: linear-gradient(135deg, #C0C0C0 0%, #808080 100%);
  color: white;
}

.rank-3 {
  background: linear-gradient(135deg, #CD7F32 0%, #8B4513 100%);
  color: white;
}

.rank-badge:not(.rank-1):not(.rank-2):not(.rank-3) {
  background: #e0e0e0;
  color: #666;
}

/* Highlight for important values */
.highlight {
  font-weight: bold;
  color: #667eea;
}

/* No Data Message */
.no-data {
  text-align: center;
  padding: 40px;
  color: #999;
  font-style: italic;
}

/* Responsive Design */
@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: 1fr;
  }

  .date-filter-form {
    flex-direction: column;
    align-items: stretch;
  }

  .date-filter-form .form-group {
    width: 100%;
  }

  .bar-chart {
    height: 250px;
    padding: 10px;
  }

  .bar-item {
    min-width: 40px;
  }

  .stat-value {
    font-size: 1.5rem;
  }
}


.page-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 30px 20px;
}

.page-container h1 {
  color: white;
  margin-bottom: 30px;
  font-size: 32px;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
}

.page-header h1 {
  margin-bottom: 0;
}

.table-container {
  background: white;
  border-radius: 15px;
  padding: 20px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
  overflow-x: auto;
}

table {
  width: 100%;
  border-collapse: collapse;
  min-width: 800px;
}

thead {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

thead th {
  color: white;
  padding: 15px;
  text-align: left;
  font-weight: 600;
  text-transform: uppercase;
  font-size: 13px;
  letter-spacing: 0.5px;
}

tbody tr {
  border-bottom: 1px solid #eee;
  transition: background 0.3s;
}

tbody tr:hover {
  background: #f8f9fa;
}

tbody td {
  padding: 15px;
  color: #333;
  font-size: 14px;
}

/* Modal Styles */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2000;
  animation: fadeIn 0.3s ease;
}

.modal-content {
  background: white;
  padding: 40px;
  border-radius: 15px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  max-width: 600px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  animation: slideUp 0.3s ease;
}

.modal-content h2 {
  color: #333;
  margin-bottom: 25px;
  font-size: 24px;
}

.modal-content form {
  display: flex;
  flex-direction: column;
}

.modal-content textarea {
  resize: vertical;
  min-height: 80px;
  font-family: inherit;
}

.modal-actions,
.form-actions {
  display: flex;
  gap: 15px;
  margin-top: 20px;
}

.modal-actions .btn,
.form-actions .btn {
  flex: 1;
}

@media (max-width: 768px) {
  .page-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 15px;
  }
  
  .table-container {
    padding: 10px;
  }
  
  .modal-content {
    padding: 25px;
    width: 95%;
  }
  
  .modal-actions,
  .form-actions {
    flex-direction: column;
  }
  
  tbody td {
    padding: 10px;
    font-size: 13px;
  }
  
  thead th {
    padding: 10px;
    font-size: 12px;
  }
}



export interface User {
  id?: number;
  email: string;
  password?: string;
  firstName: string;
  lastName: string;
  location: string;
  mobileNumber: string;
}

export interface LoginRequest {
  email: string;
  password: string;
}

export interface LoginResponse {
  success: boolean;
  message: string;
  token?: string;
  email?: string;
  firstName?: string;
  lastName?: string;
}

export interface Product {
  id?: number;
  name: string;
  description: string;
  manufacturer: string;
  price: number;
  quantity: number;
}

export interface Sale {
  id?: number;
  productId: number;
  productName: string;
  quantity: number;
  unitPrice: number;
  totalPrice: number;
  saleDate: string;
  customerName?: string;
  customerEmail?: string;
}

export interface SalesTrend {
  totalRevenue: number;
  totalSales: number;
  dailyRevenue: { [key: string]: number };
  dailyCount: { [key: string]: number };
  topProducts: TopProduct[];
  startDate: string;
  endDate: string;
}

export interface TopProduct {
  productId: number;
  productName: string;
  totalQuantity: number;
  totalRevenue: number;
}

export interface AuthContextType {
  isAuthenticated: boolean;
  user: LoginResponse | null;
  login: (email: string, password: string) => Promise<void>;
  logout: () => void;
  token: string | null;
}


import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';
import { AuthProvider } from './context/AuthContext';
import ProtectedRoute from './components/ProtectedRoute';
import Navbar from './components/Navbar';
import Login from './pages/Login';
import Register from './pages/Register';
import Dashboard from './pages/Dashboard';
import Users from './pages/Users';
import Products from './pages/Products';
import Sales from './pages/Sales';
import SalesTrends from './pages/SalesTrends';
import ConnectionTest from './pages/ConnectionTest';
import './styles/App.css';

const App: React.FC = () => {
  return (
    <AuthProvider>
      <Router>
        <div className="app">
          <Navbar />
          <div className="main-content">
            <Routes>
              <Route path="/test" element={<ConnectionTest />} />
              <Route path="/login" element={<Login />} />
              <Route path="/register" element={<Register />} />
              <Route
                path="/dashboard"
                element={
                  <ProtectedRoute>
                    <Dashboard />
                  </ProtectedRoute>
                }
              />
              <Route
                path="/users"
                element={
                  <ProtectedRoute>
                    <Users />
                  </ProtectedRoute>
                }
              />
              <Route
                path="/products"
                element={
                  <ProtectedRoute>
                    <Products />
                  </ProtectedRoute>
                }
              />
              <Route
                path="/sales"
                element={
                  <ProtectedRoute>
                    <Sales />
                  </ProtectedRoute>
                }
              />
              <Route
                path="/sales-trends"
                element={
                  <ProtectedRoute>
                    <SalesTrends />
                  </ProtectedRoute>
                }
              />
              <Route path="/" element={<Navigate to="/login" replace />} />
            </Routes>
          </div>
        </div>
      </Router>
    </AuthProvider>
  );
};

export default App;


import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);


