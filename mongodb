# MongoDB Complete Guide

## Table of Contents
1. [Introduction](#introduction)
2. [Installation & Setup](#installation--setup)
3. [Core Concepts](#core-concepts)
4. [CRUD Operations](#crud-operations)
5. [Querying](#querying)
6. [Indexing](#indexing)
7. [Aggregation](#aggregation)
8. [Transactions](#transactions)
9. [Replication](#replication)
10. [Sharding](#sharding)
11. [Best Practices](#best-practices)
12. [Performance Optimization](#performance-optimization)
13. [Security](#security)
14. [Integration Examples](#integration-examples)

---

## Introduction

### What is MongoDB?

MongoDB is a NoSQL, document-oriented database that stores data in flexible, JSON-like documents. Key features:
- **Flexible Schema**: No predefined schema required
- **Horizontal Scalability**: Built-in sharding support
- **High Availability**: Replica sets for redundancy
- **Rich Querying**: Complex queries on nested documents
- **Aggregation Framework**: Powerful data processing pipeline

### MongoDB vs Traditional SQL

| Feature | MongoDB | SQL |
|---------|---------|-----|
| Data Model | Document | Table/Row |
| Schema | Flexible | Rigid |
| Scalability | Horizontal | Vertical |
| Transactions | Multi-document | ACID |
| Query Language | MQL | SQL |

---

## Installation & Setup

### Windows Installation

```powershell
# Download MongoDB Community Edition
# https://www.mongodb.com/try/download/community

# Extract to C:\Program Files\MongoDB\Server\5.0

# Add to PATH
$env:Path += ";C:\Program Files\MongoDB\Server\5.0\bin"

# Create data directory
New-Item -ItemType Directory -Path "C:\data\db" -Force

# Start MongoDB
mongod --dbpath "C:\data\db"

# Connect to MongoDB
mongo
```

### Linux Installation

```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install -y mongodb-org

# Start service
sudo systemctl start mongod
sudo systemctl enable mongod

# Connect
mongo
```

### Docker Setup

```dockerfile
FROM mongo:5.0

EXPOSE 27017

ENV MONGO_INITDB_ROOT_USERNAME admin
ENV MONGO_INITDB_ROOT_PASSWORD password

CMD ["mongod"]
```

```bash
# Run MongoDB container
docker run -d \
  -p 27017:27017 \
  -e MONGO_INITDB_ROOT_USERNAME=admin \
  -e MONGO_INITDB_ROOT_PASSWORD=password \
  mongo:5.0
```

### MongoDB Atlas (Cloud)

```
1. Go to https://www.mongodb.com/cloud/atlas
2. Create account and organization
3. Create cluster (free tier available)
4. Whitelist IP address
5. Create database user
6. Copy connection string: mongodb+srv://user:password@cluster.mongodb.net/dbname
```

---

## Core Concepts

### Database, Collections, and Documents

```javascript
// Database: Contains multiple collections
database: myapp_db

// Collection: Similar to tables, contains documents
collection: users

// Document: Individual record (JSON-like)
{
  _id: ObjectId("507f1f77bcf86cd799439011"),
  name: "John Doe",
  email: "john@example.com",
  age: 30,
  roles: ["admin", "user"],
  address: {
    street: "123 Main St",
    city: "New York"
  },
  createdAt: ISODate("2023-01-15T10:30:00Z")
}
```

### ObjectId

- Automatically generated 12-byte unique identifier
- First 4 bytes: Timestamp (seconds since Unix epoch)
- Next 5 bytes: Machine identifier
- Last 3 bytes: Counter
- Used as default `_id` field

```javascript
// Generate ObjectId
const ObjectId = require('mongodb').ObjectId;
const id = new ObjectId();
console.log(id.toString()); // "507f1f77bcf86cd799439011"

// Convert string to ObjectId
const id = ObjectId("507f1f77bcf86cd799439011");
```

### Data Types

```javascript
{
  // Strings
  name: "John",
  
  // Numbers
  age: 30,
  salary: 50000.50,
  
  // Boolean
  isActive: true,
  
  // Date
  createdAt: ISODate("2023-01-15T10:30:00Z"),
  
  // Null
  nickname: null,
  
  // Arrays
  tags: ["javascript", "mongodb", "database"],
  
  // Nested Document (Object)
  address: {
    street: "123 Main St",
    city: "New York",
    zip: "10001"
  },
  
  // Binary Data
  profileImage: BinData(0, "base64string"),
  
  // ObjectId
  userId: ObjectId("507f1f77bcf86cd799439011"),
  
  // Regular Expression
  pattern: /^test/i,
  
  // Code
  script: Code("function() { return this.age > 30; }")
}
```

---

## CRUD Operations

### Create (Insert)

```javascript
// Single document insert
db.users.insertOne({
  name: "Alice",
  email: "alice@example.com",
  age: 28
});

// Returns: { acknowledged: true, insertedId: ObjectId(...) }

// Multiple documents insert
db.users.insertMany([
  { name: "Bob", email: "bob@example.com", age: 32 },
  { name: "Charlie", email: "charlie@example.com", age: 25 }
]);

// Returns: { acknowledged: true, insertedIds: [...] }

// Insert with custom _id
db.users.insertOne({
  _id: 1,
  name: "David",
  email: "david@example.com"
});
```

### Read (Query)

```javascript
// Find all documents
db.users.find();

// Find with filter
db.users.find({ age: { $gt: 25 } });

// Find one document
db.users.findOne({ email: "alice@example.com" });

// Count documents
db.users.countDocuments({ age: { $gt: 25 } });

// Find with projection (select specific fields)
db.users.find(
  { age: { $gt: 25 } },
  { name: 1, email: 1, _id: 0 }  // 1 = include, 0 = exclude
);
```

### Update

```javascript
// Update single document
db.users.updateOne(
  { _id: ObjectId("...") },
  { $set: { age: 31, status: "active" } }
);

// Update multiple documents
db.users.updateMany(
  { age: { $lt: 30 } },
  { $set: { category: "junior" } }
);

// Replace entire document
db.users.replaceOne(
  { _id: ObjectId("...") },
  { name: "New Name", email: "new@example.com", age: 40 }
);

// Update operators
db.users.updateOne(
  { _id: ObjectId("...") },
  {
    $set: { updated: new Date() },           // Set field value
    $inc: { loginCount: 1 },                  // Increment
    $push: { tags: "newTag" },                // Add to array
    $pull: { tags: "oldTag" },                // Remove from array
    $addToSet: { roles: "admin" },            // Add to set (unique)
    $unset: { tempField: "" },                // Remove field
    $rename: { oldName: "newName" }           // Rename field
  }
);
```

### Delete

```javascript
// Delete single document
db.users.deleteOne({ _id: ObjectId("...") });

// Delete multiple documents
db.users.deleteMany({ age: { $lt: 18 } });

// Delete all documents
db.users.deleteMany({});

// Drop entire collection
db.users.drop();

// Drop entire database
db.dropDatabase();
```

---

## Querying

### Query Operators

```javascript
// Comparison Operators
db.users.find({ age: { $eq: 30 } });      // Equal
db.users.find({ age: { $ne: 30 } });      // Not equal
db.users.find({ age: { $gt: 30 } });      // Greater than
db.users.find({ age: { $gte: 30 } });     // Greater than or equal
db.users.find({ age: { $lt: 30 } });      // Less than
db.users.find({ age: { $lte: 30 } });     // Less than or equal
db.users.find({ age: { $in: [25, 30, 35] } });      // In array
db.users.find({ age: { $nin: [25, 30, 35] } });     // Not in array

// Logical Operators
db.users.find({ $and: [{ age: { $gt: 25 } }, { status: "active" }] });
db.users.find({ $or: [{ age: { $gt: 30 } }, { status: "admin" }] });
db.users.find({ $nor: [{ age: { $lt: 20 } }, { status: "deleted" }] });
db.users.find({ $not: { age: { $gte: 30 } } });

// Element Operators
db.users.find({ email: { $exists: true } });        // Field exists
db.users.find({ age: { $type: "int" } });           // Check type

// Array Operators
db.users.find({ tags: { $all: ["javascript", "mongodb"] } });    // All elements
db.users.find({ tags: { $elemMatch: { $gt: 5 } } });             // Element matching
db.users.find({ "tags.0": "javascript" });          // Access array index
db.users.find({ tags: { $size: 3 } });              // Array size

// String Operators
db.users.find({ email: /^john/i });                 // Regex
db.users.find({ name: { $regex: "john", $options: "i" } });  // Regex operator

// Text Search (requires text index)
db.users.find({ $text: { $search: "john" } });
```

### Sort, Limit, Skip

```javascript
// Sort
db.users.find().sort({ age: 1 });          // Ascending
db.users.find().sort({ age: -1 });         // Descending
db.users.find().sort({ age: 1, name: 1 }); // Multiple fields

// Limit
db.users.find().limit(10);                 // First 10 documents

// Skip
db.users.find().skip(20);                  // Skip first 20

// Pagination
db.users
  .find()
  .skip((page - 1) * pageSize)
  .limit(pageSize)
  .sort({ createdAt: -1 });
```

---

## Indexing

### Index Types

```javascript
// Single field index
db.users.createIndex({ email: 1 });

// Compound index
db.users.createIndex({ age: 1, name: 1 });

// Text index
db.users.createIndex({ name: "text", description: "text" });

// Unique index
db.users.createIndex({ email: 1 }, { unique: true });

// Sparse index (only indexes documents with the field)
db.users.createIndex({ phone: 1 }, { sparse: true });

// TTL index (auto-delete documents after expiration)
db.sessions.createIndex({ createdAt: 1 }, { expireAfterSeconds: 3600 });

// Geospatial index
db.stores.createIndex({ location: "2dsphere" });

// Wildcard index
db.products.createIndex({ "attributes.$**": 1 });
```

### Index Management

```javascript
// View all indexes
db.users.getIndexes();

// Get index statistics
db.users.aggregate([{ $indexStats: {} }]);

// Drop specific index
db.users.dropIndex("email_1");

// Drop all indexes (except _id)
db.users.dropIndexes();

// Analyze query performance
db.users.find({ email: "john@example.com" }).explain("executionStats");
```

### Index Best Practices

```javascript
// Good: Query pattern matches index order
db.users.createIndex({ status: 1, createdAt: -1 });
db.users.find({ status: "active" }).sort({ createdAt: -1 });

// Bad: Index not used efficiently
db.users.find({ createdAt: "2023-01-01" }).sort({ status: 1 });

// Good: Selective index for sparse data
db.users.createIndex({ phone: 1 }, { sparse: true });

// Use hint to force index
db.users.find({ email: "john@example.com" }).hint({ email: 1 });

// Monitor slow queries
db.setProfilingLevel(1, { slowms: 100 });
db.system.profile.find({ millis: { $gt: 100 } }).sort({ ts: -1 }).limit(5);
```

---

## Aggregation

### Aggregation Pipeline

```javascript
// Basic aggregation
db.orders.aggregate([
  { $match: { status: "completed", amount: { $gt: 100 } } },
  { $group: { _id: "$customerId", total: { $sum: "$amount" } } },
  { $sort: { total: -1 } },
  { $limit: 10 }
]);

// Common stages
db.sales.aggregate([
  // 1. Filter documents
  { $match: { date: { $gte: ISODate("2023-01-01") } } },
  
  // 2. Project fields
  { $project: { product: 1, quantity: 1, price: 1, total: { $multiply: ["$quantity", "$price"] } } },
  
  // 3. Group and aggregate
  { $group: {
      _id: "$product",
      totalSales: { $sum: "$total" },
      avgPrice: { $avg: "$price" },
      count: { $sum: 1 }
    }
  },
  
  // 4. Sort
  { $sort: { totalSales: -1 } },
  
  // 5. Limit
  { $limit: 5 },
  
  // 6. Lookup (join)
  { $lookup: {
      from: "products",
      localField: "_id",
      foreignField: "name",
      as: "productDetails"
    }
  },
  
  // 7. Unwind arrays
  { $unwind: "$productDetails" },
  
  // 8. Add fields
  { $addFields: { category: "$productDetails.category" } },
  
  // 9. Out to collection
  { $out: "sales_summary" }
]);
```

### Aggregation Operators

```javascript
// Arithmetic
{ $add: ["$field1", "$field2", 10] }
{ $subtract: ["$field1", "$field2"] }
{ $multiply: ["$field1", "$field2"] }
{ $divide: ["$field1", "$field2"] }
{ $mod: ["$field1", "$field2"] }

// String operators
{ $concat: ["$firstName", " ", "$lastName"] }
{ $substr: ["$name", 0, 3] }
{ $toUpper: "$name" }
{ $toLower: "$name" }

// Date operators
{ $year: "$date" }
{ $month: "$date" }
{ $dayOfMonth: "$date" }
{ $hour: "$date" }
{ $addFields: { futureDate: { $add: ["$date", 86400000] } } }  // Add 1 day

// Accumulator operators
{ $group: {
    _id: "$category",
    count: { $sum: 1 },
    total: { $sum: "$amount" },
    avg: { $avg: "$amount" },
    min: { $min: "$amount" },
    max: { $max: "$amount" },
    items: { $push: "$name" },
    uniqueItems: { $addToSet: "$name" },
    first: { $first: "$name" },
    last: { $last: "$name" }
  }
}
```

---

## Transactions

### Multi-Document Transactions

```javascript
const session = db.getMongo().startSession();

session.startTransaction();

try {
  // Operations in transaction
  db.accounts.updateOne(
    { _id: 1 },
    { $inc: { balance: -100 } },
    { session: session }
  );
  
  db.accounts.updateOne(
    { _id: 2 },
    { $inc: { balance: 100 } },
    { session: session }
  );
  
  session.commitTransaction();
} catch (error) {
  session.abortTransaction();
  throw error;
} finally {
  session.endSession();
}
```

### Transaction Properties

```
ACID Compliance:
- Atomicity: All or nothing
- Consistency: Valid state before and after
- Isolation: Concurrent operations don't interfere
- Durability: Committed data persists

Requirements:
- Replica set (minimum 3 nodes)
- WiredTiger storage engine
- All operations on a single database
- Cannot perform on system collections
```

---

## Replication

### Replica Set Configuration

```javascript
// Initialize replica set
rs.initiate({
  _id: "rs0",
  members: [
    { _id: 0, host: "localhost:27017", priority: 1 },
    { _id: 1, host: "localhost:27018", priority: 0.5 },
    { _id: 2, host: "localhost:27019", priority: 0.5 }
  ]
});

// View replica set status
rs.status();

// View configuration
rs.conf();

// Add member
rs.add("localhost:27020");

// Remove member
rs.remove("localhost:27020");

// Step down primary (for maintenance)
rs.stepDown();
```

### Write Concerns

```javascript
// Default (primary writes)
db.collection.insertOne({ name: "John" });

// Replicated to 2 nodes
db.collection.insertOne(
  { name: "John" },
  { writeConcern: { w: 2 } }
);

// Replicated to majority
db.collection.insertOne(
  { name: "John" },
  { writeConcern: { w: "majority" } }
);

// Journaled (persistent)
db.collection.insertOne(
  { name: "John" },
  { writeConcern: { j: true } }
);

// With timeout
db.collection.insertOne(
  { name: "John" },
  { writeConcern: { w: "majority", wtimeout: 5000 } }
);
```

### Read Preferences

```javascript
// Primary only (default)
db.collection.find().readPref("primary");

// Prefer primary, fallback to secondary
db.collection.find().readPref("primaryPreferred");

// Secondary only
db.collection.find().readPref("secondary");

// Prefer secondary, fallback to primary
db.collection.find().readPref("secondaryPreferred");

// Nearest (lowest latency)
db.collection.find().readPref("nearest");
```

---

## Sharding

### Shard Cluster Setup

```javascript
// Start config servers
mongod --configsvr --replSet configRS --dbpath /data/config --port 27019

// Start shard servers
mongod --shardsvr --replSet shard1 --dbpath /data/shard1 --port 27018

// Start mongos (query router)
mongos --configdb configRS/localhost:27019

// Connect to mongos
mongo localhost:27017

// Enable sharding on database
sh.enableSharding("mydb");

// Shard collection on key
sh.shardCollection("mydb.users", { userId: 1 });

// View shard status
sh.status();

// View shard configuration
db.settings.find();
```

### Shard Key Selection

```javascript
// Good shard key (good cardinality, even distribution)
db.users.createIndex({ userId: 1 });
sh.shardCollection("mydb.users", { userId: 1 });

// Avoid monotonic keys (creates hot shards)
// Bad: sh.shardCollection("mydb.logs", { timestamp: 1 });

// Use compound shard key for better distribution
sh.shardCollection("mydb.orders", { customerId: 1, orderId: 1 });

// Check chunk distribution
db.collection.getShardDistribution();
```

---

## Best Practices

### Schema Design

```javascript
// ✓ Good: Embed related data for single queries
{
  _id: ObjectId(),
  title: "Product Name",
  description: "Product Description",
  price: 99.99,
  // Embed related data
  reviews: [
    { reviewer: "John", rating: 5, comment: "Great!" },
    { reviewer: "Jane", rating: 4, comment: "Good" }
  ],
  supplier: {
    name: "Supplier Inc",
    contact: "supplier@example.com"
  }
}

// ✓ Good: Reference for frequently changing or large arrays
{
  _id: ObjectId(),
  username: "john",
  profileId: ObjectId("507f1f77bcf86cd799439011")
}

// ✗ Avoid: Unbounded arrays
{
  _id: ObjectId(),
  username: "john",
  // Growing indefinitely - can cause issues
  allComments: [{ ... }, { ... }, ...]
}
```

### Naming Conventions

```javascript
// Collections: lowercase, plural
db.users
db.products
db.sales_orders

// Fields: camelCase
{
  firstName: "John",
  lastName: "Doe",
  emailAddress: "john@example.com",
  phoneNumber: "+1234567890"
}

// Avoid reserved words and special characters
```

### Error Handling

```javascript
try {
  const result = db.users.insertOne({
    name: "John",
    email: "john@example.com"
  });
  console.log("Inserted:", result.insertedId);
} catch (error) {
  if (error.code === 11000) {
    console.log("Duplicate key error:", error.message);
  } else {
    console.log("Error:", error.message);
  }
}
```

---

## Performance Optimization

### Query Optimization

```javascript
// 1. Use indexes for frequently queried fields
db.users.createIndex({ email: 1 });

// 2. Analyze explain plan
db.users.find({ email: "john@example.com" }).explain("executionStats");

// 3. Use covered queries (all fields in index)
db.users.createIndex({ email: 1, name: 1 });
db.users.find(
  { email: "john@example.com" },
  { _id: 0, email: 1, name: 1 }  // Only indexed fields
);

// 4. Use projection to reduce document size
db.users.find({}, { name: 1, email: 1 });

// 5. Limit results early
db.users.find().limit(10);

// 6. Sort on indexed field
db.users.find().sort({ createdAt: -1 });

// 7. Use aggregation for complex queries
db.orders.aggregate([
  { $match: { status: "completed" } },
  { $group: { _id: "$customerId", total: { $sum: "$amount" } } }
]);
```

### Bulk Operations

```javascript
const bulk = db.users.initializeUnorderedBulkOp();

bulk.insert({ name: "John" });
bulk.insert({ name: "Jane" });
bulk.find({ age: { $lt: 18 } }).update({ $set: { category: "minor" } });
bulk.find({ _id: ObjectId("...") }).remove();

bulk.execute();
```

### Connection Pooling

```javascript
// MongoDB driver automatically handles connection pooling
const client = new MongoClient(uri, {
  maxPoolSize: 50,
  minPoolSize: 10,
  maxIdleTimeMS: 30000,
  serverSelectionTimeoutMS: 5000
});
```

### Batch Processing

```javascript
// Process large datasets in batches
const batchSize = 1000;
let processed = 0;

while (true) {
  const batch = db.events
    .find()
    .skip(processed)
    .limit(batchSize)
    .toArray();
  
  if (batch.length === 0) break;
  
  for (const doc of batch) {
    // Process document
  }
  
  processed += batch.length;
}
```

---

## Security

### Authentication

```javascript
// Create admin user
use admin
db.createUser({
  user: "admin",
  pwd: "password123",
  roles: ["root"]
});

// Create database user
use mydb
db.createUser({
  user: "appuser",
  pwd: "apppassword",
  roles: [
    { role: "readWrite", db: "mydb" },
    { role: "read", db: "other_db" }
  ]
});

// Connection string with authentication
mongodb://user:password@localhost:27017/mydb
```

### Role-Based Access Control

```javascript
// Predefined roles
- read: Read data
- readWrite: Read and modify data
- dbAdmin: Database administration
- userAdmin: User management
- clusterAdmin: Cluster administration
- backup: Backup operations
- restore: Restore operations

// Custom role
db.createRole({
  role: "customRole",
  privileges: [
    {
      resource: { db: "mydb", collection: "users" },
      actions: ["find", "update", "insert"]
    }
  ],
  roles: []
});
```

### Encryption

```javascript
// Enable encryption at rest
mongod --enableEncryption \
  --encryptionKeyFile /path/to/keyfile \
  --encryptionCipherMode aes256-cbc

// Enable encryption in transit (TLS/SSL)
mongod --tlsMode requireTLS \
  --tlsCertificateKeyFile /path/to/cert.pem \
  --tlsCAFile /path/to/ca.pem
```

---

## Integration Examples

### Node.js Integration

```javascript
const { MongoClient } = require('mongodb');

const uri = 'mongodb://localhost:27017';
const client = new MongoClient(uri);

async function main() {
  try {
    await client.connect();
    
    const db = client.db('mydb');
    const collection = db.collection('users');
    
    // Insert
    const result = await collection.insertOne({
      name: 'John',
      email: 'john@example.com'
    });
    console.log('Inserted:', result.insertedId);
    
    // Find
    const user = await collection.findOne({ email: 'john@example.com' });
    console.log('Found:', user);
    
    // Update
    await collection.updateOne(
      { _id: result.insertedId },
      { $set: { age: 30 } }
    );
    
    // Delete
    await collection.deleteOne({ _id: result.insertedId });
    
  } finally {
    await client.close();
  }
}

main().catch(console.error);
```

### Python Integration

```python
from pymongo import MongoClient
from bson.objectid import ObjectId

client = MongoClient('mongodb://localhost:27017/')
db = client['mydb']
collection = db['users']

# Insert
result = collection.insert_one({
    'name': 'John',
    'email': 'john@example.com',
    'age': 30
})
print(f'Inserted: {result.inserted_id}')

# Find
user = collection.find_one({'email': 'john@example.com'})
print(f'Found: {user}')

# Find many
users = list(collection.find({'age': {'$gt': 25}}))
print(f'Found {len(users)} users')

# Update
collection.update_one(
    {'_id': result.inserted_id},
    {'$set': {'age': 31}}
)

# Delete
collection.delete_one({'_id': result.inserted_id})

# Close connection
client.close()
```

### Spring Boot Integration

```java
@Configuration
public class MongoConfig {
    @Bean
    public MongoClient mongoClient() {
        return MongoClients.create("mongodb://localhost:27017");
    }
}

@Repository
public interface UserRepository extends MongoRepository<User, String> {
    User findByEmail(String email);
    List<User> findByAgeGreaterThan(int age);
}

@Service
public class UserService {
    @Autowired
    private UserRepository userRepository;
    
    public User createUser(User user) {
        return userRepository.save(user);
    }
    
    public User getUserByEmail(String email) {
        return userRepository.findByEmail(email);
    }
    
    public List<User> getAdultUsers() {
        return userRepository.findByAgeGreaterThan(18);
    }
}

@Document(collection = "users")
public class User {
    @Id
    private String id;
    private String name;
    private String email;
    private int age;
    
    // Getters and setters
}
```

---

## Common Patterns

### Pagination Pattern

```javascript
async function getPaginatedUsers(page, pageSize) {
  const collection = db.collection('users');
  
  const skip = (page - 1) * pageSize;
  const users = await collection
    .find()
    .skip(skip)
    .limit(pageSize)
    .sort({ createdAt: -1 })
    .toArray();
  
  const total = await collection.countDocuments();
  
  return {
    data: users,
    page,
    pageSize,
    total,
    pages: Math.ceil(total / pageSize)
  };
}
```

### Search Pattern

```javascript
// Enable text search
db.products.createIndex({ name: "text", description: "text" });

// Search
db.products.find({ $text: { $search: "laptop" } });

// Search with relevance
db.products.aggregate([
  { $match: { $text: { $search: "laptop" } } },
  { $addFields: { score: { $meta: "textScore" } } },
  { $sort: { score: { $meta: "textScore" } } }
]);
```

### Change Stream Pattern

```javascript
const changeStream = db.collection('users').watch();

changeStream.on('change', (change) => {
  console.log('Change detected:', change.operationType);
  console.log('Document:', change.fullDocument);
});

// Close stream
changeStream.close();
```

---

## Troubleshooting

### Common Issues

| Issue | Cause | Solution |
|-------|-------|----------|
| Connection refused | MongoDB not running | Start MongoDB server |
| Duplicate key error | Duplicate value in unique field | Check unique indexes |
| Query slow | Missing index | Create appropriate index |
| Out of memory | Document too large | Split into multiple docs |
| Replication lag | Network latency | Monitor replication status |

### Monitoring

```javascript
// Current operations
db.currentOp();

// Kill operation
db.killOp(opid);

// Database statistics
db.stats();

// Collection statistics
db.collection.stats();

// Monitor replication lag
rs.printSecondaryReplicationInfo();
```

---

## Resources

- Official Documentation: https://docs.mongodb.com/
- MongoDB University: https://university.mongodb.com/
- Community: https://community.mongodb.com/
- Blog: https://www.mongodb.com/blog
